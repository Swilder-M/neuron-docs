# HJ212-2017

污染源在线监控（监测）数据传输标准 HJ212-2017 规定了污染源在线监测系统（包括废水、废气等）与环保部门之间的数据传输格式和过程。

Neuron HJ212-2017 插件主要用于采集支持环保 HJ212-2017 标准的设备数据，此驱动目前只支持设备主动上传数据。

## 添加插件

在 **配置 -> 南向设备**，点击**添加设备**来创建设备节点，输入插件名称，插件类型选择 **HJ212-2017** 启用插件。

## 设备配置

点击插件卡片或插件列，进入**设备配置**页。配置 Neuron 与设备建立连接所需的参数，下表为插件相关配置项。

| 参数         | 说明                                                       |
| ------------ | ---------------------------------------------------------- |
| **物理链路** | 选择使用 Serial （串口）或者是 TCP 通信介质。              |
| **串口设备** | 串口模式下，串口设备的路径，如 Linux 系统中 /dev/ttyUSB0。 |
| **停止位**   | 串口模式下，串口连接参数，默认值是 1                       |
| **校验位**   | 串口模式下，串口连接参数，默认值是 2，代表偶校验           |
| **波特率**   | 串口模式下，串口连接参数，默认值是 9600                    |
| **数据位**   | 串口模式下，串口连接参数，默认值是 8                       |
| **IP 地址**  | TCP 模式下，设备的 IP 地址。                               |
| **端口号**   | TCP 模式下，设备的端口号。                                 |
| **密码**     | TCP 模式下，访问密码                                       |
| **设备 ID**  | 设备 ID                                                    |
| **系统编码** | 系统编码                                                   |

## 设置组和点位

完成插件的添加和配置后，要建立设备与 Neuron 之间的通信，首先为南向驱动程序添加组和点位。

完成设备配置后，在**南向设备**页，点击设备卡片/设备列进入**组列表**页。点击**创建**来创建组，设定组名称以及采集间隔。完成组的创建后，点击组名称进入**点位列表**页，添加需要采集的设备点位，包括点位地址，点位属性，数据类型等。

公共配置项部分可参考[连接南向设备](../south-devices.md)，本页将介绍支持的数据类型和地址格式部分。

### 数据类型

* STRING
* DOUBLE
* UINT8
* INT8

### 地址格式

#### 污染物实时数据

> RT!xxxx-[Rtd\][Flag\][SampleTime\][EFlag]

| 地址                 | 类型   | 说明                         |
| -------------------- | ------ | ---------------------------- |
| RT!w01018-Rtd        | double | 污染物 w01018 实时数据        |
| RT!w01018-Flag       | string | 污染物 w01018 实时数据标志     |
| RT!w01018-SampleTime | string | 污染物 w01018 实时数据采样时间 |
| RT!w01018-EFlag      | string | 污染物 w01018 设备标志         |
| RT!w01018-ZsRtd      | double | 污染物 w01018 实时采样折算数据 |

#### 污染物分钟数据

> MIN!xxxx-[Cou\][Min\][Avg\][Max\][Flag]

| 地址             | 类型   | 说明                       |
| ---------------- | ------ | -------------------------- |
| MIN!w01018-Cou   | double | 污染物 w01018 分钟累计值     |
| MIN!w01018-Min   | double | 污染物 w01018 分钟最小值     |
| MIN!w01018-Avg   | double | 污染物 w01018 分钟平均值     |
| MIN!w01018-Max   | double | 污染物 w01018 分钟最大值     |
| MIN!w01018-Flag  | string | 污染物 w01018 分钟数据标志   |
| MIN!w01018-ZsMin | double | 污染物 w01018 分钟折算最小值 |
| MIN!w01018-ZsAvg | double | 污染物 w01018 分钟折算平均值 |
| MIN!w01018-ZsMax | double | 污染物 w01018 分钟折算最大值 |

#### 污染物小时数据

> HOUR!xxxx-[Cou\][Min\][Avg\][Max\][Flag]

| 地址              | 类型   | 说明                       |
| ----------------- | ------ | -------------------------- |
| HOUR!w01018-Cou   | double | 污染物 w01018 小时累计值     |
| HOUR!w01018-Min   | double | 污染物 w01018 小时最小值     |
| HOUR!w01018-Avg   | double | 污染物 w01018 小时平均值     |
| HOUR!w01018-Max   | double | 污染物 w01018 小时最大值     |
| HOUR!w01018-Flag  | string | 污染物 w01018 小时数据标志   |
| HOUR!w01018-ZsMin | double | 污染物 w01018 小时折算最小值 |
| HOUR!w01018-ZsAvg | double | 污染物 w01018 小时折算平均值 |
| HOUR!w01018-ZsMax | double | 污染物 w01018 小时折算最大值 |

#### 污染物日数据

> DAY!xxxx-[Cou\][Min\][Avg\][Max\][Flag]

| 地址             | 类型   | 说明                     |
| ---------------- | ------ | ------------------------ |
| DAY!w01018-Cou   | double | 污染物 w01018 日累计值     |
| DAY!w01018-Min   | double | 污染物 w01018 日最小值     |
| DAY!w01018-Avg   | double | 污染物 w01018 日平均值     |
| DAY!w01018-Max   | double | 污染物 w01018 日最大值     |
| DAY!w01018-Flag  | string | 污染物 w01018 日数据标志   |
| DAY!w01018-ZsMin | double | 污染物 w01018 日折算最小值 |
| DAY!w01018-ZsAvg | double | 污染物 w01018 日折算平均值 |
| DAY!w01018-ZsMax | double | 污染物 w01018 日折算最大值 |

## 数据监控

完成点位的配置后，您可点击 **监控** -> **数据监控**查看设备信息以及反控设备，具体可参考[数据监控](../../../usage/monitoring.md)。