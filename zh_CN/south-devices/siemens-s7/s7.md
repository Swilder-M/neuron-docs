# Siemens S7 ISOTCP 介绍与使用

## 模块描述

s7comm 插件用于带有网络端口的西门子 PLC，如，s7-200/300/400/1200/1500。

### 参数配置

| 字段      | 说明                     |
| -------- | ------------------------ |
| **host** | 远程 PLC 的 IP            |
| **port** | 远程 PLC 的端口，默认为 102 |
| **rack** | PLC 机架号，默认为 0       |
| **slot** | PLC 插槽号，默认为 1       |

:::tip
当使用 S7COMM 插件访问S7 1200/1500 PLC 时，你需要使用西门子软件（TIA16）对 PLC 进行一些设置。( 详细设置请参考 [PLC 设置](./plc/siemens-s7-1200-1500.md)。 )
:::

* 优化块访问必须被关闭。
* 访问级别必须是**完全**，**连接机制**必须允许 GET/PUT。

### 支持的数据类型

* INT16
* UINT16
* INT32
* UINT32
* FLOAT
* DOUBLE
* BIT
* STRING

## 地址格式用法

### 地址格式

> AREA ADDRESS\[.BIT][.LEN]

#### AREA ADDRESS

| 区域  | 数据类型                                           | 属性   | 备注         | S7-200 smart |
| ---- | ------------------------------------------------- | ----- | ------------ | ---- |
| I    | int16/uint16/bit                                  | 读    | 输入          | 输入I、E |
| O    | int16/uint16/bit                                  | 读/写 | 输出          | 输出Q、A |
| F    | int16/uint16/bit                                  | 读/写 | 标志          | 标志内存M |
| T    | int16/uint16                                      | 读/写 | 计时器        | 计时器T |
| C    | int16/uint16                                      | 读/写 | 计数器        | 计数器C |
| DB   | int16/uint16/bit/int32/uint32/float/double/string | 读/写 | 全局数据块     | 变量内存V，全局数据块1 |

#### .BIT

选填，指某一地址的某一位。

#### .LEN

当数据类型为 string 类型时，是必填项，表示字符串长度。

### 地址示例

| 地址        | 数据类型 | 说明      |
| ---------- | ------- | -------- |
| I0         | int16   | I 区域，地址为 0 |
| I1         | uint16  | I 区域，地址为 1 |
| O2         | int16   | O 区域，地址为 2 |
| O3         | uint16  | O 区域，地址为 3 |
| F4         | int16   | F 区域，地址为 4 |
| F5         | int16   | F 区域，地址为 5 |
| T6         | int16   | T 区域，地址为 6 |
| T7         | int16   | T 区域，地址为 7 |
| C8         | uint16  | C 区域，地址为 8 |
| C9         | uint16  | C 区域，地址为 9 |
| DB10.DBW10 | int16   | 10 数据块中，起始数据字为 10 |
| DB12.DBW10 | uint16  | 12 数据块中，起始数据字为 10 |
| DB10.DBW10 | float   | 10 数据块中，起始数据字为 10 |
| DB11.DBW10 | double  | 11 数据块中，起始数据字为 10 |
| I0.0        | bit     | I 区域，地址为0，第 0 位  |
| I0.1        | bit     | I 区域，地址为0，第 1 位  |
| O1.0        | bit     | O 区域，地址为1，第 0 位  |
| O1.2        | bit     | O 区域，地址为1，第 2 位  |
| F2.1        | bit     | F 区域，地址为2，第 1 位  |
| F2.2        | bit     | F 区域，地址为2，第 2 位  |
| T3.3        | bit     | T 区域，地址为3，第 3 位  |
| T3.4        | bit     | T 区域，地址为3，第 4 位  |
| C4.5        | bit     | C 区域，地址为4，第 5 位  |
| C4.6        | bit     | C 区域，地址为4，第 6 位  |
| DB1.DBW10.1 | bit     | 1 数据块中，起始数据字为 10，第 0 位  |
| DB2.DBW1.15 | bit     | 2 数据块中，起始数据字为 1，第 15 位  |
| DB1.DBW12.20 | string  | 1 数据块中，起始数据字为 12，字符串长度为 20 |
